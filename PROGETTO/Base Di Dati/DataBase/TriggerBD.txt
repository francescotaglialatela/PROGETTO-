TRIGGER:

CREATE FUNCTION check_id() 
RETURNS TRIGGER  AS
    $BODY$
DECLARE
    last_id integer;
    new_id integer;
BEGIN
    SELECT MAX(idInsegnante) INTO last_id
    FROM INSEGNANTE;

    SELECT idInsegnante INTO new_id
    FROM INSEGNANTE 
    WHERE idInsegnante=0;

    IF new_id = 0 THEN

    UPDATE INSEGNANTE 
    SET idInsegnante=last_id+1
    WHERE INSEGNANTE.idInsegnante=0;

    END IF;

    RETURN NULL;

END;
$BODY$
LANGUAGE PLPGSQL;

CREATE TRIGGER check_idT
AFTER INSERT ON INSEGNANTE
EXECUTE PROCEDURE check_id()

